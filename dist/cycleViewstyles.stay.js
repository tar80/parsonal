Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){var n;if(null==this)throw new Error('Array.indexOf: "this" is null or not defined');var r=Object(this),i=r.length>>>0;if(0===i)return-1;var a=null!=t?t:0;if(Math.abs(a)===Infinity&&(a=0),a>=i)return-1;for(n=Math.max(a>=0?a:i-Math.abs(a),0);n<i;){if(n in r&&r[n]===e)return n;n++}return-1});var ppx_Discard=function(e,t){var n;PPx.StayMode=0,t=null!=(n=t)?n:"","DEBUG"===e&&PPx.linemessage("[DEBUG] discard "+t)},e=["KC_main","KV_main","KV_img","KV_crt","KV_page","KB_edit","K_ppe","K_edit"],_validTable=function(t){return~e.indexOf(t)?t:"KC_main"},_discard=function(e){return function(t){var n=t.table,r=t.label,i=t.mapkey,a=t.cond,c=void 0===a?"instantly":a,u=t.debug,l=void 0===u?"0":u,o=PPx.StayMode,s=PPx.Extract("%n"),P=PPx.Extract("%FDV"),f="*linecust "+r+s+","+_validTable(n)+":"+e+",",x={instantly:"",once:'*if("'+s+'"=="%n")%:',hold:'*if("'+s+'"=="%n")&&("'+P+'"!="%FDV")%:'}[c],d=[f];i&&(PPx.Execute("*mapkey use,"+i),d.push("*mapkey delete,"+i)),d.push('*js ":'+o+',ppx_Discard",'+l+","+r),PPx.Execute(f+"%(*if %*stayinfo("+o+")%:"+x+d.join("%:")+"%)"),PPx.Execute('*run -nostartmsg %0pptrayw.exe -c %%K"@LOADCUST"')}},t=(_discard("ACTIVEEVENT"),_discard("LOADEVENT"),function(e){var t=0;return{get:function(){var n=e[t];return t=(t+1)%e.length,n},discard:_discard("LOADEVENT")}}),_setEvent=function(e,t,n,r,i){var a="*linecust "+n+","+_validTable(e),c=a+":"+t+",",u={instantly:"",once:'*if("%n"=="%%n")',hold:'*if("%n"=="%%n")&&("%FDV"=="%%FDV")'}[i];PPx.Execute(a+":"+t+","+u+"%%:"+c+"%%:"+r),PPx.Execute('%K"@LOADCUST"')},n="cycleViewstyle",cache={},r={general:["サムネ小(&J)","サムネ中(&J)","サムネ欄(&J)",'format "'+PPx.Extract("%*viewstyle")+'"'],picture:["画像中(&I)","画像大(&I)","画像特(&I)"],listfile:["一覧(c&Omment)"],ftp:[],http:[]},main=function(){var e=PPx.Arguments.length>0?"C_"+PPx.Arguments.Item(0):"",r=PPx.WindowIDName,i=PPx.DirectoryType;if(r===e&&(i=-1),i>=62)PPx.Execute("*viewstyle directory");else{PPx.StayMode=2;var a=getStyles(i);cache.dirtype=i,cache.circular=t(a),cache.circular.discard({table:"KC_main",label:n,cond:"once"}),ppx_resume()}},ppx_resume=function(){PPx.Execute("*viewstyle -temp "+cache.circular.get())},getStyles=function(e){switch(e){case-1:return r.picture;case 4:return r.listfile;case 21:return r.ftp;case 80:return r.http;default:return r.general}};main();
