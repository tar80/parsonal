Array.prototype.indexOf||(Array.prototype.indexOf=function(t,e){var r;if(null==this)throw new Error('Array.indexOf: "this" is null or not defined');var n=Object(this),i=n.length>>>0;if(0===i)return-1;var a=null!=e?e:0;if(Math.abs(a)===Infinity&&(a=0),a>=i)return-1;for(r=Math.max(a>=0?a:i-Math.abs(a),0);r<i;){if(r in n&&n[r]===t)return r;r++}return-1});var ppx_Discard=function(t,e){var r;PPx.StayMode=0,e=null!=(r=e)?r:"","DEBUG"===t&&PPx.linemessage("[DEBUG] discard "+e)},t=["KC_main","KV_main","KV_img","KV_crt","KV_page","KB_edit","K_ppe","K_edit"],_validTable=function(e){return~t.indexOf(e)?e:"KC_main"},setEvent=function(t,e,r,n,i){var a="*linecust "+r+","+_validTable(t),c=a+":"+e+",%%:"+a+":CLOSEEVENT,",u={instantly:"",once:'*if("%n"=="%%n")',hold:'*if("%n"=="%%n")&&("%FDV"=="%%FDV")'}[i];PPx.Execute(a+":"+e+","+u+"%%:"+c+"%%:"+n),PPx.Execute(a+":CLOSEEVENT,"+c),PPx.Execute('%K"@LOADCUST"')},circular=function(t){var e=0;return{get:function(){var r=t[e];return e=(e+1)%t.length,r},discard:function(t,e,r,n){void 0===n&&(n="0");var i=PPx.StayMode;setEvent(t,"LOADEVENT",e+"%n",'*script ":'+i+',ppx_Discard",'+n+","+e,r)}}},e="rotateViewstyle",r={},n={general:["サムネ小(&J)","サムネ中(&J)","サムネ欄(&J)",'format "'+PPx.Extract("%*viewstyle")+'"'],picture:["画像中(&I)","画像大(&I)","画像特(&I)"],listfile:["一覧(c&Omment)"],ftp:[],http:[]},main=function(){var t=PPx.Arguments.length>0?"C_"+PPx.Arguments.Item(0):"",n=PPx.WindowIDName,i=PPx.DirectoryType;if(n===t&&(i=-1),i>=62)PPx.Execute("*viewstyle directory");else{PPx.StayMode=2;var a=getStyles(i);r.dirtype=i,r.cifcular=circular(a),r.cifcular.discard("KC_main",e,"once"),ppx_resume()}},ppx_resume=function(){PPx.Execute("*viewstyle -temp "+r.cifcular.get())},getStyles=function(t){switch(t){case-1:return n.picture;case 4:return n.listfile;case 21:return n.ftp;case 80:return n.http;default:return n.general}};main();
