Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){var n;if(null==this)throw new Error('Array.indexOf: "this" is null or not defined');var r=Object(this),i=r.length>>>0;if(0===i)return-1;var a=null!=t?t:0;if(Math.abs(a)===Infinity&&(a=0),a>=i)return-1;for(n=Math.max(a>=0?a:i-Math.abs(a),0);n<i;){if(n in r&&r[n]===e)return n;n++}return-1});var isZero=function(e){return null!==e&&("0"===e||0===e)},e=["KC_main","KV_main","KV_img","KV_crt","KV_page","KB_edit","K_ppe","K_edit"],_validTable=function(t){return~e.indexOf(t)?t:"KC_main"},discard=function(e){return function(t){var n=t.table,r=t.label,i=t.mapkey,a=t.cond,u=void 0===a?"instantly":a,c=t.debug,l=void 0===c?"0":c,s=PPx.StayMode,o="";i&&(PPx.Execute("*mapkey use,"+i),o="%:*mapkey delete,"+i);var f="*linecust "+r+","+_validTable(n),P=f+":"+e+",",d={"true":"PPx.StayMode=0","false":"PPx.Quit(-1)"},x={instantly:d["true"],once:"if('%n'==='%%n'){"+d["true"]+"}else{"+d["false"]+"}",hold:"if('%n'==='%%n'&&'%FDV'=='%%FDV'){"+d["true"]+"}else{"+d["false"]+"}"}[u],y=""+(isZero(l)?"":"%:*linemessage [DEBUG] discard "+r)+o;PPx.Execute(f+":"+e+",*js :"+s+',"'+x+'"%%:'+P+"%("+y+"%)"),PPx.Execute('%K"@LOADCUST"')}},ppx_Discard=function(e,t){var n;PPx.StayMode=0,t=null!=(n=t)?n:"","DEBUG"===e&&PPx.linemessage("[DEBUG] discard "+t)},t=(discard("ACTIVEEVENT"),discard("LOADEVENT"),function(e){var t=0;return{get:function(){var n=e[t];return t=(t+1)%e.length,n},discard:discard("LOADEVENT")}}),_setEvent=function(e,t,n,r,i){var a="*linecust "+n+","+_validTable(e),u=a+":"+t+",",c={instantly:"",once:'*if("%n"=="%%n")',hold:'*if("%n"=="%%n")&&("%FDV"=="%%FDV")'}[i];PPx.Execute(a+":"+t+","+c+"%%:"+u+"%%:"+r),PPx.Execute('%K"@LOADCUST"')},n="rotateViewstyle",r={},i={general:["サムネ小(&J)","サムネ中(&J)","サムネ欄(&J)",'format "'+PPx.Extract("%*viewstyle")+'"'],picture:["画像中(&I)","画像大(&I)","画像特(&I)"],listfile:["一覧(c&Omment)"],ftp:[],http:[]},main=function(){var e=PPx.Arguments.length>0?"C_"+PPx.Arguments.Item(0):"",i=PPx.WindowIDName,a=PPx.DirectoryType;if(i===e&&(a=-1),a>=62)PPx.Execute("*viewstyle directory");else{PPx.StayMode=2;var u=getStyles(a);r.dirtype=a,r.circular=t(u),r.circular.discard({table:"KC_main",label:n,cond:"once"}),ppx_resume()}},ppx_resume=function(){PPx.Execute("*viewstyle -temp "+r.circular.get())},getStyles=function(e){switch(e){case-1:return i.picture;case 4:return i.listfile;case 21:return i.ftp;case 80:return i.http;default:return i.general}};main();
