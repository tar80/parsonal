var t,e,r,n;Array.prototype.indexOf||(Array.prototype.indexOf=function(t,e){var r;if(null==this)throw new TypeError('Array.indexOf: "this" is null or not defined');var n=Object(this),o=n.length>>>0;if(0===o)return-1;var i=null!=e?e:0;if(Math.abs(i)===Infinity&&(i=0),i>=o)return-1;for(r=Math.max(i>=0?i:o-Math.abs(i),0);r<o;){if(r in n&&n[r]===t)return r;r++}return-1}),Object.keys||(Object.keys=(t=Object.prototype.hasOwnProperty,e=!{toString:null}.propertyIsEnumerable("toString"),n=(r=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"]).length,function(o){if("function"!=typeof o&&("object"!=typeof o||null==o))throw new TypeError("Object.keys: called on non-object");var i,a,c=[];for(i in o)t.call(o,i)&&c.push(i);if(e)for(a=0;a<n;a++)t.call(o,r[a])&&c.push(r[a]);return c}));var actualParentDirectory=function(t){var e=/^aux:(\/\/)?[MS]_[^/\\]+[/\\]/,r=4===PPx.DirectoryType?"%FDVN":"%FDN";return PPx.Extract(r).replace(e,"")},o={doc:[".txt",".ini","log",".cfg",".html",".md",".json",".yml",".yaml",".toml",".js",".ts",".vbs",".vim",".lua"],image:[".jpg",".jpeg",".bmp",".png",".gif",".vch",".edg",".webp",".tif",".tiff"],movie:[".3gp",".avi",".mp4",".mpg",".qt",".ebml",".webm"]},i="launchppv",a="Z",c="3",main=function(){var t=PPx.Extract(".%t").toLowerCase(),e=PPx.Arguments.length>0?PPx.Argument(0).toUpperCase():getExtentions(t),r=PPx.WindowIDName==="C_"+PPx.Extract("%*getcust(S_ppm#user:thumbppc)");if(!(PPx.DirectoryType>=63)||"MOVIE"!==e&&!PPx.Execute('%"launchPPv.ts"%Q"書庫内ファイルを開きます"'))if(e){var n=PPx.Extract('%*name(C,"%FC")'),p=actualParentDirectory()+"\\"+n;if("MOVIE"===e)PPx.Execute('%Obd *ppb -c mpv.exe "'+p+'" --framedrop=vo --geometry=%*windowrect(%N.,w)x%*windowrect(%N.,h)+%*windowrect(%N.,l)+%*windowrect(%N.,t) --loop=no "'+p+'"');else{setupPPv(r,i),PPx.Execute("*setcust X_vpos="+c),PPx.Execute("%Oi *ppv -bootid:"+a+" "+p);var u=r?"a:d-":"path:,"+o[e];PPx.Execute("*maskentry -temp "+u),PPx.Execute("*jumppath -update -entry:"+n)}}else PPx.Execute('%K"@^i"%:*wait 0,1%:*focus %G"TEIF|"%:%k"^q v"')},getExtentions=function(t){for(var e=0,r=Object.keys(o);e<r.length;e++){var n=r[e];if(~o[n].indexOf(t))return n}},setupPPv=function(t,e){var r=t?"B100000000":"B000000000",n=e+",KV_main:CLOSEEVENT";PPx.Execute("*setcust X_win:V="+r),PPx.Execute("*linecust "+n+",*setcust X_vpos=%*getcust(X_vpos)%%:*linecust "+n+",%%:*execute C,%(*maskentry%%:*jumppath -update -entry:%%R%)")};main();
